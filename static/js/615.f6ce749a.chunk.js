"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[615],{615:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var r=a(35),n=a(8911),o=a(9379),i=a(7392),l=a(5865),s=a(6446),c=a(5122),d=a(5043),p=a(3003),u=a(3355),h=a(6178),m=a.n(h),x=a(1171),g=a(8584),A=a(3560),v=a(5948),b=a(3202),f=a(7025),y=a(4852),j=a(8925),w=a(6213),k=a(3768);const C=["orange","blue","lightBlue","green"];var W=a(9648),S=a(2581),D=a(7832),P=a(5542),B=a(579);const M=e=>{let{text:t,Icon:a,heading:r,edit:o,editHandler:p}=e;const[u,h]=(0,d.useState)(t),[m,x]=(0,d.useState)(!1);return(0,B.jsx)(n.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",color:"white",textAlign:"center",children:(0,B.jsxs)(n.A,{children:[(0,B.jsx)(l.A,{variant:"caption",color:"gray",children:r}),m?(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,B.jsx)(c.A,{value:u,onChange:e=>h(e.target.value)}),(0,B.jsx)(i.A,{onClick:()=>{if(u){switch(r){case"Username":p("username",u);break;case"Bio":p("bio",u);break;case"Name":p("name",u);break;default:x(!1)}x(!1)}else k.Ay.error("".concat(r," can not be Empty!"))},children:(0,B.jsx)(g.A,{})})]})}):(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,B.jsx)(l.A,{variant:"body1",color:"black",children:u}),o&&(0,B.jsx)(i.A,{onClick:()=>x(!0),children:(0,B.jsx)(A.A,{})})]})})]})})},F=e=>{let{theme:t,clickHandler:a}=e;return(0,B.jsx)(W.A,{width:"5px",height:"5px",variant:"caption",sx:{backgroundColor:t,borderRadius:"50%"},onClick:()=>a(t)})},I=()=>{var e;const{isProfile:t}=(0,p.d4)((e=>e.misc)),{user:a}=(0,p.d4)((e=>e.auth)),c=(0,y.Y)(),[h,A]=(0,d.useState)(!1),W=(0,P.A_)("single",2),I=(0,p.wA)(),[T]=(0,v.dF)(b.d2),H=(e,t)=>{T("Updating ".concat(e,"..."),{field:e,value:t})},N=(0,d.useCallback)((async()=>{try{const{data:e}=await w.A.get("".concat("https://chat-app-mern-07dn.onrender.com","/api/v1/user/profile"),{withCredentials:!0});I((0,j.sI)(null===e||void 0===e?void 0:e.user))}catch(e){console.log(e.message),I((0,j.TW)())}}),[a]),R={[f.OR]:N};(0,v.Q7)(c,R);const E=e=>{I((0,S.Yl)(e))},z=async e=>{e.preventDefault();const t=k.Ay.loading("Changing Profile Picture..."),a=new FormData;a.append("avatar",W.file);const r={withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}};try{const{data:e}=await w.A.put("".concat("https://chat-app-mern-07dn.onrender.com","/api/v1/user/profile/update/avatar"),a,r);k.Ay.success(e.message,{id:t})}catch(i){var n,o;k.Ay.error(null===i||void 0===i||null===(n=i.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{id:t})}finally{A(!1)}};(0,d.useEffect)((()=>{var e;W.preview=null===a||void 0===a||null===(e=a.avatar)||void 0===e?void 0:e.url}),[]);return(0,B.jsx)(r.A,{open:t,onClose:()=>I((0,u.QD)(!1)),fullWidth:!0,children:(0,B.jsxs)(n.A,{spacing:"2rem",direction:"column",alignItems:"center",justifyContent:"center",sx:{margin:"15px"},children:[(0,B.jsxs)("form",{style:{width:"100%",marginTop:"1rem"},onSubmit:z,children:[(0,B.jsxs)(n.A,{position:"relative",width:"10rem",margin:"auto",children:[(0,B.jsx)(o.A,{sx:{width:"10rem",height:"10rem",objectFit:"contain"},src:null!==a&&void 0!==a&&null!==(e=a.avatar)&&void 0!==e&&e.url&&!h?a.avatar.url:W.preview}),(0,B.jsx)(i.A,{sx:{position:"absolute",bottom:"0",right:"0",color:"white",bgcolor:"rgba(0, 0, 0, 0.5)",":hover":{bgcolor:"rgba(0, 0, 0, 0.7)"}},component:"label",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(x.A,{}),(0,B.jsx)(D.oQ,{onChange:e=>{W.changeHandler(e),A(!0)},type:"file"})]})}),h&&(0,B.jsx)(i.A,{type:"submit",sx:{width:"fit-content"},onClick:z,children:(0,B.jsx)(g.A,{})})]}),W.error&&(0,B.jsx)(l.A,{m:"1rem auto",width:"fit-content",display:"block",color:"error",variant:"caption",children:W.error})]}),(0,B.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,B.jsx)(M,{heading:"Username",text:null===a||void 0===a?void 0:a.username,edit:!0,editHandler:H}),(0,B.jsx)(M,{heading:"Bio",text:null===a||void 0===a?void 0:a.bio,edit:!0,editHandler:H}),(0,B.jsx)(M,{heading:"Name",text:null===a||void 0===a?void 0:a.name,edit:!0,editHandler:H}),(0,B.jsx)(M,{heading:"Joined",text:m()(null===a||void 0===a?void 0:a.createdAt).fromNow(),edit:!1}),(0,B.jsx)(l.A,{variant:"caption",color:"gray",marginBottom:0,marginTop:"2rem",children:"Customize Themes:"}),(0,B.jsx)(n.A,{direction:"row",spacing:"2rem",alignItems:"center",children:C.map(((e,t)=>(0,B.jsx)(F,{theme:e,clickHandler:E},t)))})]})]})})}},8584:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(9662),n=a(579);const o=(0,r.A)((0,n.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done")},3560:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(9662),n=a(579);const o=(0,r.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},35:(e,t,a)=>{a.d(t,{A:()=>D});var r=a(8587),n=a(8168),o=a(5043),i=a(8387),l=a(8606),s=a(992),c=a(6803),d=a(1243),p=a(6258),u=a(3336),h=a(2876),m=a(4535),x=a(7056),g=a(2400);function A(e){return(0,g.Ay)("MuiDialog",e)}const v=(0,x.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var b=a(2563),f=a(2220),y=a(6240),j=a(579);const w=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],k=(0,m.Ay)(f.A,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),C=(0,m.Ay)(d.A,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),W=(0,m.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.container,t["scroll".concat((0,c.A)(a.scroll))]]}})((e=>{let{ownerState:t}=e;return(0,n.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),S=(0,m.Ay)(u.A,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.paper,t["scrollPaper".concat((0,c.A)(a.scroll))],t["paperWidth".concat((0,c.A)(String(a.maxWidth)))],a.fullWidth&&t.paperFullWidth,a.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:a}=e;return(0,n.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===a.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===a.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!a.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===a.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(v.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},a.maxWidth&&"xs"!==a.maxWidth&&{maxWidth:"".concat(t.breakpoints.values[a.maxWidth]).concat(t.breakpoints.unit),["&.".concat(v.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[a.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},a.fullWidth&&{width:"calc(100% - 64px)"},a.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(v.paperScrollBody)]:{margin:0,maxWidth:"100%"}})})),D=o.forwardRef((function(e,t){const a=(0,h.A)({props:e,name:"MuiDialog"}),d=(0,y.A)(),m={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":x,"aria-labelledby":g,BackdropComponent:v,BackdropProps:f,children:D,className:P,disableEscapeKeyDown:B=!1,fullScreen:M=!1,fullWidth:F=!1,maxWidth:I="sm",onBackdropClick:T,onClick:H,onClose:N,open:R,PaperComponent:E=u.A,PaperProps:z={},scroll:Y="paper",TransitionComponent:K=p.A,transitionDuration:L=m,TransitionProps:Q}=a,U=(0,r.A)(a,w),X=(0,n.A)({},a,{disableEscapeKeyDown:B,fullScreen:M,fullWidth:F,maxWidth:I,scroll:Y}),J=(e=>{const{classes:t,scroll:a,maxWidth:r,fullWidth:n,fullScreen:o}=e,i={root:["root"],container:["container","scroll".concat((0,c.A)(a))],paper:["paper","paperScroll".concat((0,c.A)(a)),"paperWidth".concat((0,c.A)(String(r))),n&&"paperFullWidth",o&&"paperFullScreen"]};return(0,l.A)(i,A,t)})(X),O=o.useRef(),V=(0,s.A)(g),_=o.useMemo((()=>({titleId:V})),[V]);return(0,j.jsx)(C,(0,n.A)({className:(0,i.A)(J.root,P),closeAfterTransition:!0,components:{Backdrop:k},componentsProps:{backdrop:(0,n.A)({transitionDuration:L,as:v},f)},disableEscapeKeyDown:B,onClose:N,open:R,ref:t,onClick:e=>{H&&H(e),O.current&&(O.current=null,T&&T(e),N&&N(e,"backdropClick"))},ownerState:X},U,{children:(0,j.jsx)(K,(0,n.A)({appear:!0,in:R,timeout:L,role:"presentation"},Q,{children:(0,j.jsx)(W,{className:(0,i.A)(J.container),onMouseDown:e=>{O.current=e.target===e.currentTarget},ownerState:X,children:(0,j.jsx)(S,(0,n.A)({as:E,elevation:24,role:"dialog","aria-describedby":x,"aria-labelledby":V},z,{className:(0,i.A)(J.paper,z.className),ownerState:X,children:(0,j.jsx)(b.A.Provider,{value:_,children:D})}))})}))}))}))},2563:(e,t,a)=>{a.d(t,{A:()=>r});const r=a(5043).createContext({})}}]);
//# sourceMappingURL=615.f6ce749a.chunk.js.map