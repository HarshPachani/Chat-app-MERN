"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[283],{9648:(e,r,s)=>{s.d(r,{A:()=>d});var n=s(5043),t=s(2167),i=s(7392),o=s(8780),l=s(9379),a=s(579);const c=e=>{let{title:r,icon:s,onClick:n,value:c,color:d="inherit",sx:x,src:u}=e;return(0,a.jsx)(t.A,{title:r,sx:x,children:(0,a.jsx)(i.A,{size:"large",onClick:n,style:{color:d},children:u?c?(0,a.jsx)(o.A,{badgeContent:c,sx:{"& .MuiBadge-badge":{backgroundColor:"inherit"===d?"white":d,color:"inherit"===d?"black":"white"}},children:s}):(0,a.jsx)(l.A,{src:u}):c?(0,a.jsx)(o.A,{badgeContent:c,sx:{"& .MuiBadge-badge":{backgroundColor:"inherit"===d?"white":d,color:"inherit"===d?"black":"white"}},children:s}):s})})},d=(0,n.memo)(c)},5287:(e,r,s)=>{s.d(r,{A:()=>S});var n=s(2314),t=s(5865),i=s(6446),o=s(2220),l=s(5043),a=s(2557),c=s(9484),d=s(2522),x=s(7241),u=s(5626),h=s(4149),m=s(6598),p=s(8923),g=s(9648),A=s(3216),j=s(3003),v=s(3355),f=s(2581),b=s(7038),w=s(579);const y=(0,l.lazy)((()=>Promise.all([s.e(122),s.e(322),s.e(981)]).then(s.bind(s,2981)))),k=(0,l.lazy)((()=>Promise.all([s.e(322),s.e(621)]).then(s.bind(s,1621)))),C=(0,l.lazy)((()=>Promise.all([s.e(122),s.e(322),s.e(307)]).then(s.bind(s,8307)))),E=(0,l.lazy)((()=>Promise.all([s.e(122),s.e(178),s.e(219),s.e(315)]).then(s.bind(s,315)))),S=e=>{var r;let{chatId:s}=e;const S=(0,A.Zp)(),I=(0,A.zy)(),_=(0,j.wA)(),[G,N]=(0,l.useState)(!1),R=(0,l.useRef)(null),{user:O}=(0,j.d4)((e=>e.auth)),{isSearch:T,isNotification:P,isNewGroup:L,isProfile:z}=(0,j.d4)((e=>e.misc)),{notificationCount:F,theme:D,newMessagesCount:M}=(0,j.d4)((e=>e.chat)),U=e=>{N(!0),R.current=e.currentTarget};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(n.A,{sx:{bgcolor:a.Zp,height:{xs:"40px",sm:"100vh"},width:{xs:"100vw",sm:"80px"},margin:{xs:"none",sm:"3px"},padding:{xs:"none",sm:"10px"},borderRadius:"20px",display:{xs:s?"none":"flex",sm:"flex"},flexDirection:{xs:"row",sm:"column"},alignItems:{xs:"center",sm:"space-between"},justifyContent:{xs:"center",sm:"space-around"},position:{sm:"sticky",xs:"fixed"},left:{sm:0,xs:0},right:{sm:"auto",xs:"auto"},bottom:{sm:"auto",xs:0},top:{sm:0,xs:"auto"}},children:[(0,w.jsx)(b.A,{isOpen:G,setIsOpen:N,dispatch:_,menuAnchor:R,openProfile:()=>{N(!1),_((0,v.QD)(!0))}}),(0,w.jsx)(t.A,{variant:"h6",sx:{display:{xs:"none",sm:"block"}},children:(0,w.jsx)(p.A,{})}),(0,w.jsxs)(i.A,{children:[(0,w.jsx)(g.A,{title:"Chats",icon:(0,w.jsx)(m.A,{}),onClick:()=>{S("/")},color:!I.pathname.includes("/chat")&&"/"!==I.pathname||T||P||L||z?"inherit":D,value:M}),(0,w.jsx)(g.A,{title:"Search",icon:(0,w.jsx)(c.A,{}),color:T?D:"inherit",onClick:()=>_((0,v.Dm)(!0))}),(0,w.jsx)(g.A,{title:"New Group",icon:(0,w.jsx)(d.A,{}),color:L?D:"inherit",onClick:()=>_((0,v.uX)(!0))}),(0,w.jsx)(g.A,{title:"Manage Groups",icon:(0,w.jsx)(x.A,{}),color:I.pathname.includes("/groups")?D:"inherit",onClick:()=>{S("/groups")}}),(0,w.jsx)(g.A,{title:"Notifications",icon:(0,w.jsx)(u.A,{}),color:P?D:"inherit",value:F,onClick:()=>{_((0,v.kT)(!0)),_((0,f.Gd)())}})]}),null!==O&&void 0!==O&&null!==(r=O.avatar)&&void 0!==r&&r.url?(0,w.jsx)(g.A,{title:O.username,src:O.avatar.url,color:z?D:"inherit",sx:{display:{xs:"none",sm:"flex"}},onClick:U}):(0,w.jsx)(g.A,{title:O.username,icon:(0,w.jsx)(h.A,{}),color:z?D:"inherit",sx:{display:{xs:"none",sm:"flex"}},onClick:U})]}),T&&(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)(o.A,{open:!0}),children:(0,w.jsx)(y,{})}),P&&(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)(o.A,{open:!0}),children:(0,w.jsx)(k,{})}),L&&(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)(o.A,{open:!0}),children:(0,w.jsx)(C,{})}),z&&(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)(o.A,{open:!0}),children:(0,w.jsx)(E,{})})]})}},7025:(e,r,s)=>{s.d(r,{$H:()=>c,EI:()=>h,J8:()=>n,Jw:()=>d,OR:()=>g,_b:()=>p,bU:()=>o,hV:()=>A,nF:()=>x,nW:()=>u,o9:()=>m,qS:()=>i,tq:()=>l,u_:()=>t,v_:()=>a});const n="ALERT",t="REFETCH_CHATS",i="NEW_MESSAGE_ALERT",o="NEW_REQUEST",l="NEW_MESSAGE",a="START_TYPING",c="STOP_TYPING",d="CHAT_JOINED",x="ONLINE_USERS",u="ONLINE_USER_SET",h="ONLINE_USER_DELETE",m="GROUP_USER_TYPING",p="GROUP_USER_STOPPED_TYPING",g="REFETCH_PROFILE",A="REFETCH_GROUP_CHAT_MEMBERS"},7038:(e,r,s)=>{s.d(r,{A:()=>h});var n=s(2437),t=s(922),i=s(6990),o=s(8734),l=(s(5043),s(3552)),a=s(1702),c=s(8925),d=s(3768),x=s(6213),u=s(579);const h=e=>{let{isOpen:r,setIsOpen:s,dispatch:h,menuAnchor:m,openProfile:p}=e;return(0,u.jsx)(n.A,{open:r,onClose:()=>{m.current=null,s(!1)},anchorEl:m.current,anchorOrigin:{vertical:"right",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},children:(0,u.jsx)("div",{style:{width:"10rem"},children:(0,u.jsxs)(t.A,{children:[(0,u.jsxs)(i.A,{onClick:p,children:[(0,u.jsx)(l.A,{}),(0,u.jsx)(o.A,{style:{marginLeft:"0.5rem"},children:"MyProfile"})]}),(0,u.jsxs)(i.A,{onClick:async()=>{try{const{data:e}=await x.A.get("".concat("https://chat-app-mern-07dn.onrender.com","/api/v1/user/logout"),{withCredentials:!0});h((0,c.TW)()),d.Ay.success(e.message)}catch(n){var e,r;d.Ay.error((null===n||void 0===n||null===(e=n.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Something went wrong")}s(!1)},children:[(0,u.jsx)(a.A,{}),(0,u.jsx)(o.A,{style:{marginLeft:"0.5rem"},children:"Logout"})]})]})})})}},5948:(e,r,s)=>{s.d(r,{Q7:()=>i,dF:()=>l,xB:()=>o});var n=s(5043),t=s(3768);const i=(e,r)=>{(0,n.useEffect)((()=>(Object.entries(r).forEach((r=>{let[s,n]=r;e.on(s,n)})),()=>{Object.entries(r).forEach((r=>{let[s,n]=r;e.off(s,n)}))})),[e,r])},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,n.useEffect)((()=>{e.forEach((e=>{let{isError:r,error:s,fallBack:n}=e;var i;r&&(n?n():t.Ay.error((null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"Something went wrong"))}))}),[e])},l=e=>{const[r,s]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null),[l]=e();return[async function(e){s(!0);const r=t.Ay.loading(e||"Updating data...");try{for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const e=await l(...i);var c,d;if(e.data)t.Ay.success(e.data.message||"Updated data Successfuly",{id:r}),o(e.data);else t.Ay.error((null===e||void 0===e||null===(c=e.error)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"Something went wrong",{id:r})}catch(x){console.log(x),t.Ay.error("Something went wrong!",{id:r})}finally{s(!1)}},r,i]}},6283:(e,r,s)=>{s.r(r),s.d(r,{GroupListItem:()=>M,GroupsList:()=>D,default:()=>U});var n=s(5043),t=s(5287),i=s(6446),o=s(2557),l=s(3202),a=s(5475),c=s(5948),d=s(7025),x=s(4852),u=s(3302),h=s(579);const m=()=>e=>r=>{const s=(0,x.Y)(),[m,p]=(0,n.useState)(""),[g,A]=(0,n.useState)(""),[j,v]=(0,n.useState)(!1),{data:f,refetch:b}=(0,l.Wz)(""),w=(0,n.useCallback)((e=>{b()}),[b]),y={[d.u_]:w};(0,c.Q7)(s,y);const k=(0,a.ok)()[0].get("group");return(0,n.useEffect)((()=>(k&&(p("Group Name ".concat(k)),A("Group Name ".concat(k))),()=>{p(""),A(""),v(!1)})),[k]),(0,h.jsxs)(i.A,{sx:{display:"flex",position:{xs:"relative",sm:"fixed"},flexDirection:{xs:"column-reverse",sm:"row"},backgroundColor:o.wm,height:"100%",width:"100%"},children:[(0,h.jsx)(u.A,{}),(0,h.jsx)(t.A,{chatId:k}),(0,h.jsx)(D,{myGroups:null===f||void 0===f?void 0:f.groups,chatId:k}),(0,h.jsx)(e,{...r,myGroups:null===f||void 0===f?void 0:f.groups})]})};var p=s(2167),g=s(7392),A=s(8911),j=s(1906),v=s(5122),f=s(5865),b=s(8903),w=s(1637),y=s(2220),k=s(3216),C=s(4302),E=s(6625),S=s(2522),I=s(8584),_=s(3560),G=s(4149),N=s(4070),R=s(3003),O=s(3355),T=s(9648),P=s(7832),L=s(5079);const z=(0,n.lazy)((()=>s.e(861).then(s.bind(s,1861)))),F=(0,n.lazy)((()=>s.e(481).then(s.bind(s,5481)))),D=e=>{let{w:r="100%",myGroups:s=[],chatId:t}=e;const[l,a]=(0,n.useState)(""),[c,d]=(0,n.useState)(s),{user:x}=(0,R.d4)((e=>e.auth)),u=(0,R.wA)();(0,n.useEffect)((()=>{d(s)}),[s]),(0,n.useEffect)((()=>{var e;""===l.trim()&&d(s),s=null===(e=s)||void 0===e?void 0:e.filter((e=>{var r;return null===e||void 0===e||null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(null===l||void 0===l?void 0:l.toLowerCase().trim())})),d(s)}),[l]);return(0,h.jsxs)(b.Ay,{item:!0,sx:{display:{xs:t?"none":"block",sm:"block"},marginBottom:"5px"},children:[(0,h.jsxs)(i.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-around",alignItems:"center",backgroundColor:o.ON,borderRadius:"15px",padding:"5px",height:"auto"},margin:"5px",children:[(0,h.jsxs)(i.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:{xs:"100%",sm:"auto"}},children:[(0,h.jsx)(f.A,{variant:"h5",sx:{marginLeft:"5px"},children:"Groups"}),(0,h.jsx)(T.A,{title:null===x||void 0===x?void 0:x.username,icon:(0,h.jsx)(G.A,{}),sx:{display:{xs:"flex",sm:"none"}},onClick:()=>u((0,O.QD)(!0))})]}),(0,h.jsx)(P.cl,{placeholder:"Search Groups...",value:l,onChange:e=>{a(e.target.value)}})]}),(0,h.jsx)(A.A,{width:r,direction:"column",sx:{height:"100%",overflow:"auto",backgroundColor:o.ON,borderRadius:"20px",marginRight:"5px",border:"2px solid ".concat(o.ON)},children:(null===c||void 0===c?void 0:c.length)>0?c.map((e=>(0,h.jsx)(M,{group:e,chatId:t},e._id))):(0,h.jsx)(f.A,{textAlign:"center",padding:"1rem",children:"No groups"})})]})},M=(0,n.memo)((e=>{let{group:r,chatId:s}=e;const{name:n,avatar:t,_id:i}=r,l=(0,a.ok)()[0].get("group");return(0,h.jsx)(P.N_,{to:"?group=".concat(i),onClick:e=>{s===i&&e.preventDefault()},style:{backgroundColor:l===i?o.wm:""},children:(0,h.jsxs)(A.A,{direction:"row",spacing:"1rem",alignItems:"center",children:[(0,h.jsx)(L.A,{avatar:t}),(0,h.jsx)(f.A,{children:n})]})})})),U=(0,n.memo)(m()((e=>{let{myGroups:r}=e;const s=(0,a.ok)()[0].get("group"),t=(0,k.Zp)(),u=(0,R.wA)(),m=(0,x.Y)(),{isAddMember:G}=(0,R.d4)((e=>e.misc)),{data:T,refetch:P}=(0,l.eo)({chatId:s,populate:!0},{skip:!s}),L=(0,n.useCallback)((e=>{console.log("Refetching..."),P()}),[P]),D={[d.hV]:L};(0,c.Q7)(m,D);const[M,U]=(0,n.useState)(""),[W,B]=(0,n.useState)(""),[H,Q]=(0,n.useState)([]),[Y,J]=(0,n.useState)(!1),[Z,q]=(0,n.useState)(!1),[V,K]=(0,c.dF)(l.wU),[X,$]=(0,c.dF)(l.Kt),[ee,re]=(0,c.dF)(l.c),se=[{isError:null===r||void 0===r?void 0:r.isError,error:null===r||void 0===r?void 0:r.error},{isError:null===T||void 0===T?void 0:T.isError,error:null===T||void 0===T?void 0:T.error}];(0,c.xB)(se),(0,n.useEffect)((()=>{const e=T;return e&&(U(e.chat.name),B(e.chat.name),Q(e.chat.members)),()=>{U(""),B(""),Q([]),J("")}}),[T]),(0,n.useEffect)((()=>{U(W)}),[W]),(0,n.useEffect)((()=>{var e,r;s&&T&&(U("".concat(null===T||void 0===T||null===(e=T.chat)||void 0===e?void 0:e.name)),B("".concat(null===T||void 0===T||null===(r=T.chat)||void 0===r?void 0:r.name)));return()=>{U(""),B(""),J(!1)}}),[s]);const ne=e=>{X("Removing member...",{chatId:s,userId:e})},te=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.A,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}}}),(0,h.jsx)(p.A,{title:"back",children:(0,h.jsx)(g.A,{sx:{display:s?"block":"none",position:"absolute",top:"2rem",left:"2rem",bgcolor:o.wm,color:"black"},onClick:()=>{t("/groups")},children:(0,h.jsx)(C.A,{})})})]}),ie=(0,h.jsxs)(A.A,{direction:{xs:"column-reverse",sm:"row"},spacing:"1rem",p:{sm:"1rem",xs:"0",md:"1rem 4rem"},children:[(0,h.jsx)(j.A,{size:"large",color:"error",startIcon:(0,h.jsx)(E.A,{}),onClick:()=>{q(!0)},children:"Delete Group"}),(0,h.jsx)(j.A,{size:"large",color:"warning",variant:"contained",startIcon:(0,h.jsx)(S.A,{}),onClick:()=>{u((0,O.M9)(!0))},children:"Add Member"})]}),oe=(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(A.A,{direction:"row",alignItems:"center",justifyContent:"center",padding:"1rem",spacing:"1rem",children:Y?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.A,{value:W,onChange:e=>B(e.target.value)}),(0,h.jsx)(g.A,{onClick:()=>{J(!1),ee("Updating Group Name...",{chatId:s,name:W})},disabled:re,children:(0,h.jsx)(I.A,{})})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(f.A,{variant:"h5",children:["Group Name: ",M]}),(0,h.jsx)(g.A,{onClick:()=>J(!0),disabled:re,children:(0,h.jsx)(_.A,{})})]})})});return(0,h.jsxs)(b.Ay,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[te,M&&(0,h.jsxs)(h.Fragment,{children:[oe,(0,h.jsx)(f.A,{margin:"2rem",alignSelf:"flex-start",variant:"body",children:"Members"}),(0,h.jsx)(A.A,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:$?(0,h.jsx)(w.A,{}):null===H||void 0===H?void 0:H.map((e=>(0,h.jsx)(N.A,{user:e,isAdded:!0,styling:{boxShadow:"0 0 0.5rem rgba(0, 0, 0, 0.2)",padding:{xs:0,sm:"1rem 2rem"},borderRadius:"1rem"},handler:ne},e._id)))}),ie]}),G&&(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(y.A,{open:!0}),children:(0,h.jsx)(F,{chatId:s})}),Z&&(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(y.A,{open:!0}),children:(0,h.jsx)(z,{open:Z,handleClose:()=>q(!1),deleteHandler:()=>{V("Deleting Group...",s),t("/groups"),q(!1)}})})]})})))},5079:(e,r,s)=>{s.d(r,{A:()=>d});var n=s(5043),t=s(8911),i=s(5754),o=s(6446),l=s(9379),a=s(579);const c=e=>{let{avatar:r=[],max:s=4}=e;return(0,a.jsx)(t.A,{direction:"row",spacing:.5,children:(0,a.jsxs)(i.A,{max:s,sx:{position:"relative"},children:[(0,a.jsx)(o.A,{width:"5rem",height:"3rem"}),r&&(null===r||void 0===r?void 0:r.map(((e,r)=>{var s;return(0,a.jsx)(l.A,{src:null!==e&&void 0!==e&&e.avatar?null===e||void 0===e||null===(s=e.avatar)||void 0===s?void 0:s.url:e,alt:"Avatar ".concat(r),sx:{width:"3rem",height:"3rem",position:"absolute",left:{xs:"".concat(.5+r,"rem"),sm:"".concat(r+1,"rem")}}},100*Math.random())})))]})})},d=(0,n.memo)(c)},3302:(e,r,s)=>{s.d(r,{A:()=>i});s(5043);var n=s(9367),t=s(579);const i=e=>{let{title:r="We-Chat",description:s="This is the Chat App"}=e;return(0,t.jsxs)(n.mg,{children:[(0,t.jsx)("title",{children:r}),(0,t.jsx)("meta",{name:"description",content:s})]})}},4070:(e,r,s)=>{s.d(r,{A:()=>m});var n=s(8920),t=s(2522),i=s(1322),o=s(8911),l=s(9379),a=s(5865),c=s(7392),d=s(5043),x=s(141),u=s(579);const h=e=>{let{user:r,handler:s,handlerIsLoading:d,isAdded:h=!1,styling:m={}}=e;const{name:p,_id:g,avatar:A}=r;return(0,u.jsx)(i.Ay,{children:(0,u.jsxs)(o.A,{direction:"row",alignItems:"center",width:"100%",sx:{...m},children:[(0,u.jsx)(l.A,{src:(0,x.ay)(A)}),(0,u.jsx)(a.A,{variant:"body1",sx:{flexGlow:1,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:p}),(0,u.jsx)(c.A,{size:"small",sx:{bgcolor:h?"error.main":"primary.main",color:"white","&:hover":{bgcolor:h?"error.dark":"primary.dark"}},onClick:()=>s(g),disabled:d,children:h?(0,u.jsx)(n.A,{}):(0,u.jsx)(t.A,{})})]})})},m=(0,d.memo)(h)}}]);
//# sourceMappingURL=283.52c57de0.chunk.js.map